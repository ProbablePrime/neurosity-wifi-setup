<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Neurosity WiFi Setup</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/water.css@2/out/water.css">
</head>
<body x-data="$store.neurosity">
    <h1>Neurosity WiFi Setup</h1>
    <div id="app">
        <h2>1. Neurosity Login</h2>
        <div x-show="!authenticated">
            <form @submit.prevent="login()">
                <input type="email" x-model="email" placeholder="Email" required>
                <input type="password" x-model="password" placeholder="Password" required>
                <button type="submit">Login</button>
            </form>
        </div>
        <div x-show="authenticated">
            <p>Currently signed in as: <span x-text="username"></span></p>
        </div>

        <h2>2. Connect Bluetooth</h2>
        <div x-show="!bluetooth">
            <button @click="connect()">
            Connect Bluetooth
            </button>
        </div>
        <div x-show="bluetooth">
            <p x-text="state"></p>
            <p>Connected device ID: <span x-text="deviceId"></span></p>
        </div>

        <h2>3. Device Claim</h2>
        <div x-show="!deviceClaimed">
            <p>Claim your device to account: <span x-text="username"></span></p>
            <button @click="claimDevice(deviceId)">
            Claim Device
            </button>
        </div>
        <div x-show="deviceClaimed">
            <p>Release your device from account: <span x-text="username"></span></p>
            <p>Another user will be able to claim it later.</p>
            <button @click="releaseDevice(deviceId)">
            Release Device
            </button>
        </div>
        <p>Device Claimed: <span x-text="deviceClaimed"></span></p>

        <h2>4. WiFi Connection</h2>
        <form @submit.prevent="wifiConnect()">
            <input type="text" x-model="ssid" placeholder="SSID" required>
            <input type="password" x-model="wifiPassword" placeholder="Password" required>
            <button type="submit">Connect WiFi</button>
        </form>
        <div x-show="done">
            <h2>5. Done</h2>
            <p>âœ… Your crown is registered to your account, connected to wifi and ready to go. Checkout the <a href="https://console.neurosity.co/login">Neurosity Console</a> for additional options.
            </p>
        </div>
    </div>
    <script type="module" src="/main.js"></script>
</body>
</html>
